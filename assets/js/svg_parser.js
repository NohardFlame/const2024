const p =
    "M1041.04 16.0388V72.8937M1041.04 16.0388L1189.08 115.803M1041.04 16.0388L1156.9 198.404M1041.04 72.8937L900.514 2.09314L983.115 137.258M1041.04 72.8937L1057.13 158.713M983.115 137.258L934.841 187.676M983.115 137.258L976.678 198.404M983.115 137.258L1057.13 158.713M934.841 187.676L923.041 293.877M934.841 187.676L976.678 198.404M923.041 293.877L894.077 367.896M923.041 293.877L934.841 367.896M923.041 293.877L976.678 259.55M923.041 293.877L961.124 303.532M894.077 367.896L968.097 452.642M894.077 367.896H934.841M968.097 452.642L1041.04 468.733M968.097 452.642L999.206 424.751M968.097 452.642L934.841 367.896M1041.04 468.733L1132.23 367.896M1041.04 468.733H1166.55M1041.04 468.733L999.206 609.261M1041.04 468.733L1122.57 593.17M1132.23 367.896L1050.7 356.096M1132.23 367.896L1106.48 313.186M1132.23 367.896L1272.75 293.877M1132.23 367.896L1166.55 468.733M1050.7 356.096L999.206 424.751M1050.7 356.096L1033.53 259.55M1050.7 356.096L1106.48 313.186M1050.7 356.096L934.841 367.896M999.206 424.751L934.841 367.896M934.841 367.896L999.206 313.186M934.841 367.896L961.124 303.532M1033.53 259.55L999.206 313.186M1033.53 259.55H976.678M1033.53 259.55L1106.48 313.186M1033.53 259.55L976.678 198.404M999.206 313.186L961.124 303.532M976.678 259.55V198.404M976.678 198.404L1089.32 213.422M1057.13 158.713L1089.32 213.422M1057.13 158.713L1156.9 198.404M1089.32 213.422L1106.48 313.186M1089.32 213.422L1156.9 198.404M1106.48 313.186L1156.9 198.404M1189.08 115.803L1303.86 198.404M1189.08 115.803L1156.9 198.404M1303.86 198.404L1343.55 288.513M1303.86 198.404L1272.75 293.877M1343.55 288.513L1334.97 386.132M1343.55 288.513L1272.75 293.877M1334.97 386.132L1408.99 543.824M1334.97 386.132L1250.23 445.133M1408.99 543.824L1378.96 777.681M1408.99 543.824H1238.43M1378.96 777.681L1238.43 543.824M1378.96 777.681L1287.77 757.299M1378.96 777.681L1349.77 870.973M1378.96 777.681L1409.16 960.945M1238.43 543.824L1250.23 445.133M1238.43 543.824L1166.55 468.733M1238.43 543.824L1287.77 757.299M1250.23 445.133L1272.75 293.877M1272.75 293.877L1156.9 198.404M1272.75 293.877L1166.55 468.733M1166.55 468.733L1122.57 593.17M1166.55 468.733L1225.55 599.607M999.206 609.261L916.605 790.554M999.206 609.261L1026.02 777.681M999.206 609.261L1122.57 593.17M916.605 790.554L1026.02 777.681M916.605 790.554L866.384 1172.64M916.605 790.554L1004.58 983.291M1026.02 777.681L1057.13 718.227M1026.02 777.681L1017.79 856.642M1026.02 777.681L1156.9 818.445M1122.57 593.17L1225.55 599.607M1122.57 593.17L1211.61 804.499M1122.57 593.17L1156.9 818.445M1122.57 593.17L1057.13 718.227M1225.55 599.607L1211.61 804.499M1211.61 804.499L1287.77 757.299M1211.61 804.499L1156.9 818.445M1211.61 804.499L1279.79 958.005M1211.61 804.499L1205.69 986.231M1287.77 757.299L1279.79 958.005M1287.77 757.299L1349.77 870.973M1156.9 818.445L1057.13 718.227M1156.9 818.445L1086.32 1013.87M1156.9 818.445L1017.79 856.642M1156.9 818.445L1162.18 1081.5M866.384 1172.64L1004.58 983.291M866.384 1172.64L1036.92 1444.33M866.384 1172.64L908.724 1306.72M1004.58 983.291L1086.32 1013.87M1004.58 983.291L1017.79 856.642M1004.58 983.291L1067.5 1272.61M1086.32 1013.87L1017.79 856.642M1086.32 1013.87L1162.18 1081.5M1086.32 1013.87L1067.5 1272.61M1086.32 1013.87L1162.18 1342M1162.18 1081.5V1342M1279.79 958.005L1349.77 870.973M1279.79 958.005L1358.59 983.291M1279.79 958.005L1205.69 986.231M1349.77 870.973L1358.59 983.291M1409.16 960.945L1358.59 983.291M1409.16 960.945L1459.14 1065.03M1358.59 983.291L1292.72 1315.54M1205.69 986.231L1199.22 1194.4L1162.18 1342M1459.14 1065.03L1440.33 1239.09M1459.14 1065.03L1292.72 1315.54M1440.33 1239.09L1292.72 1315.54M1440.33 1239.09L1365.06 1396.69M1292.72 1315.54L1281.55 1367.29M1279.79 960.945L1212.16 1380.23M1212.16 1380.23L1162.18 1342M1212.16 1380.23L1176.88 1456.68M1212.16 1380.23L1232.15 1456.68M1162.18 1342L1067.5 1272.61M1162.18 1342L1052.21 1358.47M1162.18 1342L1111.02 1453.73M1162.18 1342L1176.88 1456.68M1067.5 1272.61L1052.21 1358.47M1036.92 1444.33L1054.56 1475.49L1071.03 1460.2L1096.31 1487.25L1111.02 1453.73M1036.92 1444.33L1052.21 1358.47M1036.92 1444.33L932.834 1412.57M1365.06 1396.69L1310.37 1423.74M1365.06 1396.69L1281.55 1367.29M1310.37 1423.74L1292.72 1487.25L1271.55 1467.26L1253.91 1494.31L1232.15 1456.68M1310.37 1423.74L1281.55 1367.29M1232.15 1456.68L1214.51 1487.25L1176.88 1456.68M1232.15 1456.68L1281.55 1367.29M1176.88 1456.68L1162.18 1490.19L1139.83 1460.2L1130.42 1497.84L1111.02 1453.73M1111.02 1453.73L1052.21 1358.47M908.724 1306.72L932.834 1412.57M908.724 1306.72L797.751 1328.18M641.158 1358.47L574.708 1453.73M641.158 1358.47L797.751 1328.18M641.158 1358.47L699.964 1460.2M574.708 1453.73L673.501 1517.83M574.708 1453.73L699.964 1460.2M673.501 1517.83L817.575 1523.13M673.501 1517.83L699.964 1460.2M817.575 1523.13L801.698 1465.5L751.125 1481.37M817.575 1523.13L751.125 1481.37M751.125 1481.37L699.964 1460.2M699.964 1460.2L711.725 1428.45M711.725 1428.45L784.644 1412.57M711.725 1428.45L722.31 1385.52L784.644 1412.57M784.644 1412.57L848.154 1431.39M784.644 1412.57L797.751 1328.18M848.154 1431.39L932.834 1412.57M848.154 1431.39L797.751 1328.18M932.834 1412.57L797.751 1328.18M580 1019.16L619.4 997.992L629.985 1035.04M580 1019.16L541.189 1061.5L506.493 1058.56L520.031 1090.71M580 1019.16L574.708 1066.79M580 1019.16L604.351 1049.77M520.607 1092.08L493.556 1100.31L509.425 1123.3M520.607 1092.08L509.425 1123.3M520.607 1092.08L520.031 1090.71M510.61 1125.01V1180.29M510.61 1125.01L570.591 1129.13M510.61 1125.01L509.425 1123.3M510.61 1180.29L570.591 1129.13M510.61 1180.29L574.708 1294.96M510.61 1180.29L565.299 1200.87M510.61 1180.29L455.601 1322.11M510.61 1180.29L509.859 1294.96M570.591 1129.13L565.299 1200.87M570.591 1129.13L623.516 1073.85M570.591 1129.13L601.17 1125.01M570.591 1129.13L591.173 1172.64M570.591 1129.13L574.708 1066.79M565.299 1200.87L591.173 1172.64M565.299 1200.87L574.708 1294.96M565.299 1200.87L608.227 1214.4M591.173 1172.64L608.227 1214.4M591.173 1172.64L601.17 1125.01M608.227 1214.4L648.803 1222.63M608.227 1214.4L601.17 1240.27M608.227 1214.4L629.985 1240.27M648.803 1222.63L675.853 1226.75L648.803 1253.21M648.803 1222.63V1253.21M648.803 1253.21L629.985 1240.27M601.17 1125.01L623.516 1073.85M623.516 1073.85L635.278 1058.56L629.985 1035.04M623.516 1073.85L604.351 1049.77M629.985 1035.04L604.351 1049.77M520.031 1090.71L574.708 1066.79M574.708 1066.79L604.351 1049.77M574.708 1294.96L595.878 1270.26L601.17 1240.27M574.708 1294.96V1366.11M574.708 1294.96C554.518 1316.13 513.195 1359.06 509.425 1361.41M574.708 1294.96H509.859M601.17 1240.27L615.872 1253.21L629.985 1240.27M502.965 1494.31L547.069 1449.03M502.965 1494.31L506.493 1421.72M502.965 1494.31L457.043 1441.19M502.965 1494.31L515.902 1517.83M502.965 1494.31L448.864 1514.89M502.965 1494.31L495.32 1536.65M547.069 1449.03V1403.16M547.069 1449.03L506.493 1421.72M547.069 1403.16L574.708 1366.11M547.069 1403.16C534.649 1391.78 512.031 1369.93 509.336 1363.24M547.069 1403.16L506.493 1421.72M574.708 1366.11L509.425 1361.41M509.336 1363.24C509.116 1362.7 509.029 1362.25 509.09 1361.92M509.336 1363.24L509.425 1361.41M509.336 1363.24L506.493 1421.72M509.09 1361.92C509.131 1361.7 509.241 1361.52 509.425 1361.41M509.09 1361.92L509.425 1361.41M509.09 1361.92L457.043 1441.19M509.425 1361.41L455.601 1322.11M509.425 1361.41L424.165 1403.16M509.425 1361.41L509.859 1294.96M455.601 1322.11L424.165 1403.16M455.601 1322.11L509.859 1294.96M424.165 1403.16L457.043 1441.19M424.165 1403.16L385.942 1457.26M506.493 1421.72L457.043 1441.19M457.043 1441.19L444.159 1453.73M515.902 1517.83L574.708 1526.07L561.182 1554.29M515.902 1517.83L495.32 1536.65M515.902 1517.83L561.182 1554.29M561.182 1554.29H515.902L495.32 1536.65M495.32 1536.65L448.864 1514.89M448.864 1514.89L457.043 1490.19L444.159 1453.73M444.159 1453.73L385.942 1500.78M444.159 1453.73L385.942 1457.26M385.942 1500.78L323.608 1533.71M385.942 1500.78V1457.26M385.942 1500.78L327.136 1494.31M323.608 1533.71L252.453 1554.29M323.608 1533.71L327.136 1494.31M323.608 1533.71L261.862 1522.54M252.453 1554.29H175.418M252.453 1554.29L261.862 1522.54M252.453 1554.29L184.826 1536.65M175.418 1554.29L93.6777 1551.35L184.826 1536.65M175.418 1554.29L184.826 1536.65M184.826 1536.65L261.862 1522.54M261.862 1522.54L327.136 1494.31M327.136 1494.31L385.942 1457.26M383.229 75.2657L434.273 62.7883M383.229 75.2657L292.484 122.907M383.229 75.2657L375.289 122.907V167.145M434.273 62.7883H485.317M434.273 62.7883L459.229 99.0862L478.512 131.981M485.317 62.7883L543.167 83.2059M485.317 62.7883L536.362 138.787M543.167 83.2059L632.778 131.981L704.239 243.144M543.167 83.2059L577.196 131.981L599.883 167.145M704.239 243.144L714.448 307.8M704.239 243.144L642.986 187.563L599.883 167.145M714.448 307.8V356.575M714.448 307.8L665.673 262.427L618.032 232.935M714.448 356.575L691.762 425.768M714.448 356.575L665.673 328.217L622.569 307.8M691.762 425.768L655.464 471.14M691.762 425.768L599.883 420.096M655.464 471.14L618.032 518.782L582.868 555.079M655.464 471.14H577.196M582.868 555.079H618.032L655.464 569.826L682.687 595.915L714.448 619.735L731.463 656.033L754.149 702.54L731.463 733.166L691.762 721.823L665.673 694.6L632.778 668.511H599.883V702.54L611.226 733.166L618.032 767.196V796.688H582.868L543.167 810.3L520.481 825.046L497.795 846.598L485.317 872.687L492.123 907.85L520.481 916.925L551.107 929.402H577.196L611.226 937.342L642.986 929.402L673.613 916.925L704.239 922.596L738.269 929.402L767.761 957.76V1004.27L754.149 1040.56L746.209 1080.27M582.868 555.079L509.138 569.826M582.868 555.079L543.167 525.587M292.484 122.907L241.44 187.563M292.484 122.907V224.995M241.44 187.563L202.873 285.113L222.157 408.753M241.44 187.563L252.784 285.113M222.157 408.753L241.44 460.932M222.157 408.753L230.098 344.098L252.784 285.113M241.44 460.932L275.47 496.095M241.44 460.932L261.858 408.753L275.47 350.903M275.47 496.095L356.006 555.079M275.47 496.095L316.305 408.753M356.006 555.079L421.796 569.826M356.006 555.079L421.796 490.424M421.796 569.826H509.138M421.796 569.826L471.706 508.573M509.138 569.826L543.167 525.587M543.167 525.587L471.706 508.573M543.167 525.587L577.196 471.14M471.706 508.573L421.796 490.424M471.706 508.573L520.481 460.932M421.796 490.424L363.946 460.932L316.305 408.753M421.796 490.424L453.557 437.111M316.305 408.753L275.47 350.903M316.305 408.753L356.006 356.575M275.47 350.903L252.784 285.113M275.47 350.903L323.111 298.725M252.784 285.113L292.484 224.995M292.484 224.995L323.111 298.725M292.484 224.995L331.051 187.563L375.289 167.145M323.111 298.725L356.006 356.575M323.111 298.725L356.006 268.099L383.229 254.487M356.006 356.575L405.916 408.753L453.557 437.111M356.006 356.575L427.468 322.546M453.557 437.111L520.481 460.932M453.557 437.111L485.317 376.993M520.481 460.932L577.196 471.14M520.481 460.932L551.107 408.753M577.196 471.14L599.883 420.096M599.883 420.096L551.107 408.753M599.883 420.096L618.032 356.575L622.569 307.8M551.107 408.753L485.317 376.993M551.107 408.753L560.182 356.575L569.257 298.725M485.317 376.993L459.229 350.903L427.468 322.546M485.317 376.993L509.138 298.725M427.468 322.546L405.916 285.113L383.229 254.487M427.468 322.546L509.138 298.725M383.229 254.487V207.98L375.289 167.145M383.229 254.487L443.348 224.995L509.138 212.517M375.289 167.145L427.468 144.459L478.512 131.981M478.512 131.981L509.138 212.517M478.512 131.981L536.362 138.787M509.138 212.517H560.182M509.138 212.517V298.725M509.138 298.725H569.257M536.362 138.787L560.182 212.517M536.362 138.787L599.883 167.145M560.182 212.517L569.257 298.725M560.182 212.517L618.032 232.935M569.257 298.725L622.569 307.8M599.883 167.145L618.032 232.935M618.032 232.935L622.569 307.8E";

let last_ver = [0, 0];

function svgAnalizer(w, h) {
    // svg in text format whith "E" as
    // end symbol, width and height of image
    let output = [];
    let t = p;
    let tmp;
    let tmp1;
    let i = 0;
    while (t[i] != "E") {
        if (t[i] == "M") {
            tmp = floatFinder(t, i + 1);
            pushInVert(output, getResized(tmp[0], floatFinder(t, tmp[2] + 1)[0], w, h));
        }
        if (t[i] == "L") {
            tmp = floatFinder(t, i + 1);
            pushInVert(output, getResized(tmp[0], floatFinder(t, tmp[2] + 1)[0], w, h));
        }
        if (t[i] == "V") {
            tmp = floatFinder(t, i + 1);
            pushInVert(output, getResized(last_ver[0], tmp[0], w, h));
        }
        if (t[i] == "H") {
            tmp = floatFinder(t, i + 1);
            pushInVert(output, getResized(tmp[0], last_ver[1], w, h));
        }
        if (t[i] == "C") {
            tmp = floatFinder(t, i + 1);
            tmp = floatFinder(t, tmp[2] + 1);
            tmp = floatFinder(t, tmp[2] + 1);
            tmp = floatFinder(t, tmp[2] + 1);
            tmp = floatFinder(t, tmp[2] + 1);
            tmp1 = floatFinder(t, tmp[2] + 1);
            pushInVert(output, getResized(tmp[0], tmp1[0], w, h));
        }
        i++;
    }
    console.log(JSON.stringify(output));
    console.log(output);
    return output;
}

function getResized(x, y, w, h) {
    last_ver = [x, y];
    x = (x / w) * 2 - 1;
    y = (-y / h) * 2 + 1;
    return [x, y];
}

function floatFinder(t, index) {
    let output = 0;
    let mode = 0;
    let p = 0;
    positive = true;
    for (let i = index; i < t.length; ++i) {
        if (parseInt(t[i]) >= 0 && parseInt(t[i]) <= 9) {
            if (mode == 0) {
                output = output * 10 + parseInt(t[i]);
            }
            if (mode == 1) {
                output = output + parseInt(t[i]) * pow_01(p);
                p += 1;
            }
        } else if (t[i] == "-") {
            positive = false;
        } else if (t[i] == ".") {
            mode = 1;
            p = 1;
        } else if (t[i] == " ") {
            if (positive) return [output, false, i];
            else {
                output *= -1;
                return [output, false, i];
            }
        } else {
            if (positive) return [output, true, i - 1];
            else {
                output *= -1;
                return [output, true, i - 1];
            }
        }
    }
}

function pow_01(p) {
    let res = 1;
    for (let i = 0; i < p; ++i) {
        res = res * 0.1;
    }
    return res;
}

function pushInVert(arr, vert) {
    //console.log(arr.length)
    for (let i = 0; i < arr.length; ++i) {
        //console.log(int(vert[1]*10000), int(arr[i][1]*10000))
        if (vert[0] >= arr[i][0] - 0.02 && vert[0] <= arr[i][0] + 0.02) {
            //console.log(int(vert[1]*10000), int(arr[i][1]*10000))
            if (vert[1] >= arr[i][1] - 0.02 && vert[1] <= arr[i][1] + 0.02) {
                //console.log(vert[0], arr[i][0], vert[1], arr[i][1])
                return;
            }
        }
    }
    vert.push("Text Header");
    vert.push("Text content");
    arr.push(vert);
}
